@page "/Receptionist/ManageReservations"
@model HRS_SmartBooking.Pages.Receptionist.ManageReservationsModel
@{
    ViewData["Title"] = "Manage Reservations";
}

<section class="reception-page">
    <header class="reception-header">
        <div>
            <p class="eyebrow">Reservations</p>
            <h1>Manage live bookings</h1>
            <p>Smart filters, badge statuses, and hover-highlights built for a fast receptionist workflow.</p>
        </div>
        <button class="btn btn-gradient">
            <i class="bi bi-calendar-plus me-2"></i>
            Add reservation
        </button>
    </header>

    <form method="get" class="filter-bar">
        <div class="filter-field">
            <label>Status</label>
            <select name="bookingStatus" asp-for="BookingStatus">
                <option value="">All</option>
                <option value="pending">Pending</option>
                <option value="confirmed">Confirmed</option>
                <option value="cancelled">Cancelled</option>
            </select>
        </div>
        <div class="filter-field">
            <label>Date</label>
            <input type="date" name="filterDate" asp-for="FilterDate" min="2001-01-01" max="@DateTime.Now.AddYears(10).ToString("yyyy-MM-dd")" />
        </div>
        <div class="filter-field">
            <label>Room type</label>
            <select name="roomType" asp-for="RoomType">
                <option value="">Any</option>
                @foreach (var roomType in Model.RoomTypes)
                {
                    <option value="@roomType">@roomType</option>
                }
            </select>
        </div>
        <div class="filter-field full">
            <label>Customer</label>
            <div class="input-icon">
                <i class="bi bi-search"></i>
                <input type="search" name="searchQuery" asp-for="SearchQuery" placeholder="Search by name or booking ID" />
            </div>
        </div>
        <button type="submit" class="btn btn-outline-light">Filter</button>
        @if (!string.IsNullOrEmpty(Model.BookingStatus) || Model.FilterDate.HasValue || !string.IsNullOrEmpty(Model.RoomType) || !string.IsNullOrEmpty(Model.SearchQuery))
        {
            <a asp-page="/Receptionist/ManageReservations" class="btn btn-outline-light">Clear</a>
        }
    </form>

    <div class="data-card table-card">
        <div class="card-header">
            <h2>Reservation table</h2>
            <span class="badge badge-outline">@Model.Reservations.Count entries</span>
        </div>
        <div class="responsive-table">
            <table>
                <thead>
                    <tr>
                        <th>Booking ID</th>
                        <th>Customer</th>
                        <th>Email</th>
                        <th>Room</th>
                        <th>Check-in</th>
                        <th>Check-out</th>
                        <th>Guests</th>
                        <th>Total Price</th>
                        <th>Payment Method</th>
                        <th>Payment Status</th>
                        <th>Status</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var row in Model.Reservations)
                    {
                        <tr>
                            <td><strong>@row.BookingId</strong></td>
                            <td>@row.Customer</td>
                            <td>@row.Email</td>
                            <td>@row.RoomType @row.Room</td>
                            <td>@row.CheckIn</td>
                            <td>@row.CheckOut</td>
                            <td>@row.Guests</td>
                            <td><strong>@row.TotalPrice</strong></td>
                            <td>@row.PaymentMethod</td>
                            <td>
                                <span class="status @row.PaymentStatus.Replace(" ", "").ToLower()">@row.PaymentStatus</span>
                            </td>
                            <td>
                                <span class="status @row.Status.Replace(" ", "").ToLower()">@row.Status</span>
                            </td>
                            <td class="actions">
                                <button class="btn btn-icon btn-compact" title="View details">
                                    <i class="bi bi-eye"></i>
                                </button>
                                <button class="btn btn-icon btn-compact" title="Approve">
                                    <i class="bi bi-check2-circle"></i>
                                </button>
                                <button class="btn btn-icon btn-compact" title="Cancel">
                                    <i class="bi bi-x-circle"></i>
                                </button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</section>

